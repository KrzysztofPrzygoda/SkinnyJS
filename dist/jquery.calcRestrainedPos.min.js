!function(a){var b={apply:!1,container:null,direction:"north",offsets:{},viewport:!0},c={north:"east",east:"south",south:"west",west:"north"};a.calcRestrainedPos=function(d){function e(a){var b;return n&&(b=n[a]),b||(b=o),b}function f(a){switch(a){case"north":v.top=p.top-o.height-u.vertical,v.left=Math.max(u.padding,p.left+p.width/2-o.width/2),d.cornerAdjacent&&!l(a,v)&&(v.left=p.left+u.padding);break;case"east":v.top=p.top+p.height/2-o.height/2,v.left=p.left+p.width+u.horizontal,d.cornerAdjacent&&!l(a,v)&&(v.top=p.top+u.padding);break;case"south":v.top=p.top+p.height+u.vertical,v.left=Math.max(u.padding,p.left+p.width/2-o.width/2),d.cornerAdjacent&&!l(a,v)&&(v.left=p.left+u.padding);break;case"west":v.top=p.top+p.height/2-o.height/2,v.left=p.left-o.width-u.horizontal,d.cornerAdjacent&&!l(a,v)&&(v.top=p.top+u.padding)}}function g(a,b){null!==q&&(v.top<q.top?(v.top=q.top+u.container,!d.cornerAdjacent||"east"!==a&&"west"!==a||l(a,v)||(v.top=p.top+u.padding,b.minY=v.top)):v.top+o.height>q.top+q.height&&(v.top=q.top+q.height-o.height-u.container,!d.cornerAdjacent||"east"!==a&&"west"!==a||l(a,v)||(v.top=p.top+p.height-u.padding-o.height,b.maxY=v.top)),v.left+o.width>q.left+q.width?(v.left=q.left+q.width-o.width-u.container,!d.cornerAdjacent||"north"!==a&&"south"!==a||l(a,v)||(v.left=p.left+p.width-u.padding-o.width,b.maxX=v.left)):v.left<q.left&&(v.left=q.left+u.container,!d.cornerAdjacent||"north"!==a&&"south"!==a||l(a,v)||(v.left=p.left+u.padding,b.minX=v.left)))}function h(a,b){!0===d.viewport&&(v.top<t.y+u.viewport?(v.top=t.y+u.viewport,!d.cornerAdjacent||"east"!==a&&"west"!==a||l(a,v)||(v.top=p.top+u.padding,b.minY=v.top)):v.top+o.height>t.y+s.height&&(v.top=t.y+s.height-o.height-u.viewport,!d.cornerAdjacent||"east"!==a&&"west"!==a||l(a,v)||(v.top=p.top+p.height-u.padding-o.height,b.maxY=v.top)),v.left+o.width>t.x+s.width?(v.left=t.x+s.width-o.width-u.viewport,!d.cornerAdjacent||"north"!==a&&"south"!==a||l(a,v)||(v.left=p.left+p.width-u.padding-o.width,b.maxX=v.left)):v.left<t.x+u.viewport&&(v.left=t.x+u.viewport,!d.cornerAdjacent||"north"!==a&&"south"!==a||l(a,v)||(v.left=p.left+u.padding,b.minX=v.left)))}function i(a,b,c,d,e){for(var f,g,h,i,j,k=[{min:a,max:b}];k.length&&(j=e());)for(g=j.pos-(d+c),h=j.pos+j.size+d,f=0;f<k.length;f++){if(i=k[f],g<=i.min)h>i.min&&(i.min=Math.max(i.min,h));else if(h>=i.max)i.max=Math.min(i.max,g);else{var l={min:h,max:i.max};i.max=g,l.min<l.max&&k.splice(f+1,0,l)}i.min>=i.max&&(k.splice(f,1),f--)}var m,n=p.left+(p.width-o.width)/2,q=a-1,r=Number.MAX_VALUE;for(f=0;f<k.length&&r>0;f++)i=k[f],n<i.min?(m=i.min-n)<r&&(q=i.min,r=m):n>i.max?(m=n-i.max)<r&&(q=i.max,r=m):(q=n,r=0);return(q<a||q>b)&&(q=null),q}function j(a,b){if(r){var c,e,f,g,h=0,j=r.slice();if("east"===a||"west"===a){var k=b.minX-u.horizontal,l=b.minX+o.width+u.horizontal;c=b.minY,e=b.maxY,g=o.height,d.cornerAdjacent&&o.height>p.height&&j.splice(0,0,{left:k,width:l-k,top:p.top+p.height-o.height,height:o.height-p.height}),f=i(c,e,g,u.vertical,function(){for(var a,b=null;!b&&h<j.length;h++)a=j[h],a.left<=l&&a.left+a.width>=k&&(b={pos:a.top,size:a.height});return b}),null!==f?(v.left=b.minX,v.top=f):(v.left=b.minX-1,v.top=b.minY-1)}else{var m=b.minY-u.vertical,n=b.minY+o.height+u.vertical;c=b.minX,e=b.maxX,g=o.width,d.cornerAdjacent&&o.width>p.width&&j.splice(0,0,{top:m,height:n-m,left:p.left+p.width-o.width,width:o.width-p.width}),f=i(c,e,g,u.horizontal,function(){for(var a,b=null;!b&&h<j.length;h++)a=j[h],a.top<=n&&a.top+a.height>=m&&(b={pos:a.left,size:a.width});return b}),null!==f?(v.left=f,v.top=b.minY):(v.left=b.minX-1,v.top=b.minY-1)}}}function k(a,b){switch(a){case"north":case"south":b.minX=Math.max(b.minX,p.left-o.width+u.padding),b.maxX=Math.min(p.left+p.width-u.padding,b.maxX-o.width),b.minY=b.maxY=v.top;break;case"east":case"west":b.minY=Math.max(b.minY,p.top-o.height+u.padding),b.maxY=Math.min(p.top+p.height-u.padding,b.maxY-o.height),b.minX=b.maxX=v.left}return b}function l(a,b){var c=!0;switch(a){case"north":case"south":c=b.left>=p.left+u.padding&&b.left<=p.left+p.width-u.padding||b.left+o.width<=p.left+p.width-u.padding&&b.left+o.width>=p.left+u.padding;break;case"east":case"west":c=b.top>=p.top+u.padding&&b.top<=p.top+p.bottom-u.padding||b.top+o.height<=p.top+p.height-u.padding&&b.top+o.height<=p.top+p.height-u.padding}return c}function m(a,b){return a.left>=b.minX&&a.left<=b.maxX&&a.top>=b.minY&&a.top<=b.maxY}d=a.extend({},b,d);var n=d.contentSizes,o=d.bounds||a(d.content).clientRect(),p=d.contextBounds||a(d.context).clientRect(),q=d.containerBounds||(d.container?a(d.container).clientRect():null),r=d.exclusions,s=d.viewportBounds||{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight},t={x:a(window).scrollLeft(),y:a(window).scrollTop()},u=a.extend({padding:0,viewport:0,container:0,vertical:0,horizontal:0},d.offsets||{}),v=d.reset||{},w=d.direction;w in c||(w="north");var x,y,z,A,B=w;x=y=0,z=s.width,A=s.height,null!==q&&(x=q.left+u.container,y=q.top+u.container,z=q.left+q.width-u.container,A=q.top+q.height-u.container),!0===d.viewport&&(x=Math.max(u.viewport,x),y=Math.max(u.viewport,y),z=Math.min(s.width-u.viewport,z),A=Math.min(s.height-u.viewport,A));for(var C;;){o=e(w),f(w),C=k(w,{minX:x,minY:y,maxX:z,maxY:A}),g(w,C),h(w,C),m(v,C)&&j(w,C);var D=a.extend({},o,v);if(!(d.cornerAdjacent&&!l(w,v)||a.doBoundingBoxesIntersect(D,p)))break;if(c[w]===B){if(d.giveMeSomething)break;return null}w=c[w]}return v.maxWidth=s.width-v.left-u.viewport,o.width>=s.width&&(v.width="auto",v.left="0px",v.margin="0 "+u.padding+"px",v.maxWidth="100%"),{direction:w,pos:v}},a.doBoundingBoxesIntersect=function(a,b){return a.left<b.left+b.width&&a.left+a.width>b.left&&a.top<b.top+b.height&&a.top+a.height>b.top}}(jQuery);