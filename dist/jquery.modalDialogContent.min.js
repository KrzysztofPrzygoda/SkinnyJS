!function(e){e.modalDialog=e.modalDialog||{};var t,o=e.modalDialog._ua=function(){var e=navigator.userAgent;return e.indexOf("MSIE 7.0")>0?{ie:!0,ie7:!0,version:7,compat:e.indexOf("compatible")>0}:e.indexOf("MSIE 8.0")>0?{ie:!0,ie8:!0,version:8,compat:e.indexOf("compatible")>0}:{}}();e.modalDialog.setSmallScreen=function(e){t=e},e.modalDialog.isSmallScreen=function(){if(void 0!==t)return t;if(o.ie7||o.ie8)return!1;var n=e(window).width();return("number"==typeof window.orientation?Math.min(n,e(window).height()):n)<=480}}(jQuery),function(e){var t=function(e){return""===e?e:e||null},o=function(e){if(e)switch(e=e.toString().toLowerCase()){case"true":case"yes":case"1":return!0}return!1},n=function(e){return e?new Function("event",e):null},i={title:t,onopen:n,onbeforeopen:n,onclose:n,onbeforeclose:n,maxWidth:parseInt,initialHeight:parseInt,ajax:o,onajaxerror:n,destroyOnClose:o,skin:t,enableHistory:o,closeOnBackgroundClick:o,closeOnEscape:o,zIndex:parseInt};e.modalDialog=e.modalDialog||{},e.modalDialog.getSettings=function(t){var o={};return e.each(function(e){if(Object.keys)return Object.keys(e);var t=[];for(var o in e)e.hasOwnProperty(o)&&(t[t.length]=o);return t}(i),function(e,n){var a=t.attr("data-dialog-"+n);if(void 0!==a){var l=i[n];o[n]=l(a)}}),o}}(jQuery),function(e){if(e.modalDialog&&e.modalDialog._isHost)throw new Error("Attempt to load jquery.modalDialogContent.js in the same window as jquery.modalDialog.js.");var t=-1,o=function(t){this.eventType=t,this.callbacks=new e.Callbacks;for(var o=1;o<arguments.length;o++)this.callbacks.add(arguments[o])};o.prototype={fire:function(t){var o=new e.Event(this.eventType);return e.extend(o,t),this.callbacks.fire(o),o},add:function(e){e&&this.callbacks.add(e)}};var n=function(e,t){var n="on"+t;e[n]=new o(t,e.settings[n]),delete e.settings[n]},i=function(e){if(this.settings=e,n(this,"open"),n(this,"close"),n(this,"beforeclose"),this.settings._window){this._window=e._window,delete e._window,this.settings._fullId=this._window.name;var o=this.settings._fullId.split("_");o.pop(),o.length>0&&(this.settings.parentId=o.join("_"),this._parentWindow=parent.frames[this.settings.parentId])}else this.settings._parentWindow&&(this.settings.parentId=e._parentWindow.name,this._parentWindow=e._parentWindow,delete e._parentWindow,this.settings._fullId=this.settings.parentId+"_dialog"+ ++t,this._postCommandToParent("create",this.settings))};i.prototype={dialogType:"iframe",open:function(){this._postCommandToParent("open")},close:function(){this._postCommandToParent("close")},getParent:function(){return void 0===this._parentDialog&&(this._parentDialog=null,this.settings.parentId&&(this._parentDialog=new i({_window:parent.frames[this.settings.parentId]}))),this._parentDialog},getWindow:function(){return this._window||(this._window=this._window||parent.frames[this.settings._fullId]),this._window},setHeight:function(t,o,n){if(e.modalDialog.autoSizing&&!this._internalCall)throw new Error("Auto sizing is enabled, so manual size setting is disallowed.");t=Math.round(t),this._currentFrameHeight&&this._currentFrameHeight==t||(this._currentFrameHeight=t,this._postCommandToParent("setHeight",{height:t,center:!!o,skipAnimation:!!n}))},setHeightFromContent:function(t,o){var n;if(e.modalDialog.sizeElement){var i=e.modalDialog.sizeElement.clientRect();n=i.top+i.height}else n=e(window).contentSize().height;this.setHeight(n,t,o)},_setHeightFromContentInternal:function(){this._internalCall=!0,this.setHeightFromContent.apply(this,arguments),this._internalCall=!1},center:function(){this._postCommandToParent("center")},setTitle:function(e,t){this._postCommandToParent("setTitle",{title:e,initializing:!!t})},setTitleFromContent:function(e){this.setTitle(document.title,e)},notifyReady:function(){e.modalDialog.sizeElement&&(e.modalDialog.sizeElement instanceof jQuery||(e.modalDialog.sizeElement=e(e.modalDialog.sizeElement)),0===e.modalDialog.sizeElement.length&&(e.modalDialog.sizeElement=null)),e.modalDialog.useTitleTag&&this.setTitleFromContent(!0),this._setHeightFromContentInternal(!1,!0);var t=document.location.protocol+"//"+document.location.hostname;document.location.port&&(t+=":"+document.location.port),this._postCommandToParent("notifyReady",{hostname:t}),e.modalDialog.autoSizing&&this.enableAutoSizing()},enableAutoSizing:function(t){void 0===t&&(t=!0),t?this._autoSizeInterval=setInterval(e.proxy(function(){this._setHeightFromContentInternal(!1,!0)},this),100):this._autoSizeInterval&&window.clearInterval(this._autoSizeInterval)},postMessageToParent:function(t){if(void 0===this._postMessageDirect)try{this._postMessageDirect=parent._dialogReceiveMessageManual,this._postMessageDirect||(this._postMessageDirect=null)}catch(e){this._postMessageDirect=null}if(this._postMessageDirect)this._postMessageDirect(t,document.location.protocol+"//"+document.location.host);else{if(!e.modalDialog.parentHostName)throw new Error("Must specify $.modalDialog.parentHostName because the parent is in a different domain");e.postMessage?e.postMessage(t,e.modalDialog.parentHostName,parent):parent.postMessage(t,e.modalDialog.parentHostName)}},_postCommandToParent:function(t,o){var n={dialogCmd:t,_fullId:this.settings._fullId};o&&e.extend(n,o);var i=e.param(n);this.postMessageToParent(i)},_trigger:function(e,t){var o=this["on"+e];o&&o.fire(t)}};var a={};e.modalDialog=e.modalDialog||{},e.modalDialog._isContent=!0,e.modalDialog.manualNotifyReady=!1,e.modalDialog.sizeElement=".dialog-content-size",e.modalDialog.autoSizing=!0,e.modalDialog.parentHostName=null,e.modalDialog.useTitleTag=!0,e.modalDialog.create=function(t){(t=e.extend({},t))._parentWindow=window;var o=new i(t);return a[o.settings._fullId]=o,o},e.modalDialog.getCurrent=function(){if(0!==window.name.indexOf("dialog"))return null;var e=l(window.name);return e||(e=new i({_window:window}),a[window.name]=e),e};var l=function(e){return a[e]},s={setHeightFromContent:function(e,t){e.setHeightFromContent("true"===t.center,"true"===t.skipAnimation)},setTitleFromContent:function(e){e.setTitleFromContent()},eventclose:function(e,t){e._trigger("close",t)},eventbeforeclose:function(e,t){e._trigger("beforeclose",t)}},r=function(t){var o;try{o=e.deparam(t.originalEvent?t.originalEvent.data:t.data)}catch(e){return}if(o.dialogCmd){var n=s[o.dialogCmd];if(n){var i=null;o._eventDialogId?(i=l(o._eventDialogId),delete o._eventDialogId):i=e.modalDialog.getCurrent(window),i&&n(i,o)}}};e.receiveMessage?e.receiveMessage(r,"*"):e(window).on("message",r),e.mobile&&e.mobile.resetActivePageHeight&&(e.mobile.document.off("pageshow",e.mobile.resetActivePageHeight),e.mobile.window.off("throttledresize",e.mobile.resetActivePageHeight),e(".ui-page").css("min-height",0),e.mobile.resetActivePageHeight=e.noop,e.mobile.focusPage=e.noop),e(window).load(function(){var t=e.modalDialog.getCurrent();t&&(e.modalDialog.manualNotifyReady||t.notifyReady())})}(jQuery),function(e){var t=function(t,o){"iframe"==t.dialogType&&e([window,document]).enableEvent("touchmove touchstart touchend",!o)},o=function(){return window.innerHeight||e(window).height()};e(function(){if(e.modalDialog.isSmallScreen())if(e.modalDialog.veilClass="dialog-veil-opaque",e.modalDialog&&e.modalDialog._isContent){var n=e.modalDialog.getCurrent();n&&e(window).on("load",function(){t(n,!0)})}else e.modalDialog.onopen.add(function(){t(this,!0)}),e.modalDialog.onbeforeclose.add(function(){t(this,!1)}),function(){var t=e("[data-dialog-main-panel='true']");0===t.length&&(t=e("[data-dialog-hide-onopen='true']"));var n=0,i=0;e.modalDialog.onbeforeopen.add(function(){0===this.level&&(n=e(document).scrollTop(),i=document.body.style.height,t.each(function(t,o){e(o).data("dialog-parent",o.parentNode)}).detach(),document.body.style.height=o()+50+"px",window.scrollTo(0,1))}),e.modalDialog.onopen.add(function(){if(0===this.level){var t=Math.max(this.$container.height(),o())+20;document.body.style.height=t+"px",e(".dialog-background").css({height:t}),window.scrollTo(0,1)}}),e.modalDialog.onclose.add(function(){0===this.level&&(document.body.style.height=i,t.each(function(t,o){e(e(o).data("dialog-parent")).append(o)}),window.scrollTo(0,n))})}()})}(jQuery),function(e){var t="modalDialogUnobtrusive";e(document).on("click","[data-rel='modalDialog']",function(o){o.preventDefault();var n=e(o.currentTarget),i=n.attr("data-dialog-url")||n.attr("href");if(!i)throw new Error("no href specified with data-rel='modalDialog'");var a={contentOrUrl:i},l=e.modalDialog.getSettings(n);e.extend(a,l);var s=new e.Event("dialogsettingscreate");if(s.dialogSettings=a,n.trigger(s),!s.isDefaultPrevented()){var r=n.data(t);if(r){var d=e.modalDialog._ensureSettings(a);e.modalDialog._areSettingsEqual(r.settings,d)||(r._destroy(),r=null)}if(!r){if(r=e.modalDialog.create(a),(s=new e.Event("dialogcreate")).dialogSettings=a,s.dialog=r,n.trigger(s),s.isDefaultPrevented())return;a.destroyOnClose||n.data(t,r)}r.open()}}),e(document).on("click",".close-dialog",function(t){t.preventDefault(),setTimeout(function(){var t=e.modalDialog.getCurrent();t&&t.close()},0)})}(jQuery);